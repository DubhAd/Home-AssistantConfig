id: 'second_bedroom_button'
alias: 'Second bedroom button'
initial_state: 'on'
trigger:
  - platform: state
    entity_id: sensor.second_bedroom_button_action
    to: 'single'
    id: single
  - platform: state
    entity_id: sensor.second_bedroom_button_action
    to: 'hold'
    id: hold
action:
  - choose:
      - conditions:
          - condition: trigger
            id: hold
        sequence:
          - service: select.select_option
            target:
              entity_id: select.wled_neon_k_preset
            data:
              option: 'Night'
          - service: light.turn_on
            data:
              entity_id: light.wled_neon_k
      - conditions:
          - condition: trigger
            id: single
        sequence:
          - if:
              - condition: state
                entity_id: light.wled_neon_k
                state: 'off'
            then:
              - service: light.turn_on
                data:
                  entity_id: light.wled_neon_k
              - choose:
                  - conditions:
                      - condition: time
                        after: '00:00'
                        before: '05:00'
                    sequence:
                      - service: select.select_option
                        target:
                          entity_id: select.wled_neon_k_preset
                        data:
                          option: 'Night'
                  - conditions:
                      - condition: or
                        conditions:
                          - condition: time
                            after: '23:00'
                            before: '00:00'
                          - condition: time
                            after: '05:00'
                            before: '06:00'
                    sequence:
                      - service: select.select_option
                        target:
                          entity_id: select.wled_neon_k_preset
                        data:
                          option: 'Red'
                default:
                  - service: select.select_option
                    target:
                      entity_id: select.wled_neon_k_preset
                    data:
                      option: 'White'
            else:
              - service: light.turn_off
                data:
                  entity_id: light.wled_neon_k
